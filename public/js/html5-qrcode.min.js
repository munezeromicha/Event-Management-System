class Html5QrcodeScanner{constructor(elementId,config,verbose){this.elementId=elementId;this.config=config;this.verbose=verbose===true;this.currentScanType=Html5QrcodeScanner.SCAN_TYPE_CAMERA;this.sectionSwapAllowed=true;this.section=undefined;this.html5Qrcode=undefined;this.qrCodeSuccessCallback=undefined;this.qrCodeErrorCallback=undefined}render(qrCodeSuccessCallback,qrCodeErrorCallback){this.lastMatchFound=undefined;this.qrCodeSuccessCallback=(...args)=>{this.__setStatus("MATCH",Html5QrcodeScanner.STATUS_SUCCESS);this.__lastMatchFound(...args)};this.qrCodeErrorCallback=qrCodeErrorCallback;if(this.verbose){this.__log("User passed config",this.config)}const container=document.getElementById(this.elementId);if(!container){throw`HTML Element with id=${this.elementId} not found`}container.innerHTML="";this.__createBasicLayout(container);this.html5Qrcode=new Html5Qrcode(this.__getScanRegionId(),this.verbose)}clear(){const container=document.getElementById(this.elementId);if(!container){throw`HTML Element with id=${this.elementId} not found`}container.innerHTML="";this.__resetBasicLayout(container)}static SCAN_TYPE_CAMERA="SCAN_TYPE_CAMERA";static SCAN_TYPE_FILE="SCAN_TYPE_FILE";static STATUS_SUCCESS="STATUS_SUCCESS";static STATUS_WARNING="STATUS_WARNING";static STATUS_DEFAULT="STATUS_DEFAULT";static ASSET_FILE_SCAN="ASSET_FILE_SCAN";static ASSET_CAMERA_SCAN="ASSET_CAMERA_SCAN";__createBasicLayout(parent){parent.style.position="relative";parent.style.padding="0px";parent.style.border="1px solid silver";this.__createHeader(parent);const qrCodeScanRegion=document.createElement("div");const scanRegionId=this.__getScanRegionId();qrCodeScanRegion.id=scanRegionId;qrCodeScanRegion.style.width="100%";qrCodeScanRegion.style.minHeight="100px";qrCodeScanRegion.style.textAlign="center";parent.appendChild(qrCodeScanRegion);this.__insertCameraScanImageToScanRegion();const qrCodeDashboard=document.createElement("div");const dashboardId=this.__getDashboardId();qrCodeDashboard.id=dashboardId;qrCodeDashboard.style.width="100%";parent.appendChild(qrCodeDashboard);this.__setupInitialDashboard(dashboardId)}__resetBasicLayout(parent){parent.style.border="none"}__setupInitialDashboard(dashboardId){this.__createSection(dashboardId);this.__createSectionControlPanel();this.__createSectionSwap()}__createHeader(dashboard){const header=document.createElement("div");header.style.textAlign="left";header.style.margin="0px";dashboard.appendChild(header);const titleSpan=document.createElement("span");titleSpan.style.fontSize="20px";titleSpan.style.fontWeight="bold";titleSpan.style.marginLeft="10px";titleSpan.textContent="QR Code Scanner";header.appendChild(titleSpan)}__createSection(dashboard){const section=document.createElement("div");section.id=this.__getDashboardSectionId();section.style.width="100%";section.style.padding="10px";section.style.textAlign="left";dashboard.appendChild(section)}__createSectionControlPanel(){const section=document.getElementById(this.__getDashboardSectionId());const sectionControlPanel=document.createElement("div");section.appendChild(sectionControlPanel);const scpCameraContainer=document.createElement("div");scpCameraContainer.id=this.__getDashboardSectionCameraScanRegionId();scpCameraContainer.style.display="none";sectionControlPanel.appendChild(scpCameraContainer)}__createSectionSwap(){const section=document.getElementById(this.__getDashboardSectionId());const sectionSwap=document.createElement("div");sectionSwap.style.textAlign="center";const swapIcon=document.createElement("img");swapIcon.style.width="14px";swapIcon.style.height="14px";swapIcon.style.opacity="0.4";swapIcon.style.cursor="pointer";swapIcon.style.marginLeft="10px";swapIcon.addEventListener("click",()=>{this.__clearScanRegion();this.__getFileScanInput().value="";this.sectionSwapAllowed=!this.sectionSwapAllowed;this.__insertCameraScanImageToScanRegion();this.__setStatus("IDLE");this.__resetHeaderMessage()});section.appendChild(sectionSwap)}__setStatus(statusText,statusClass){if(!statusClass){statusClass=Html5QrcodeScanner.STATUS_DEFAULT}const statusSpan=document.getElementById(this.__getStatusSpanId());statusSpan.innerHTML=statusText;switch(statusClass){case Html5QrcodeScanner.STATUS_SUCCESS:statusSpan.style.background="#6aaf5042";statusSpan.style.color="#477735";break;case Html5QrcodeScanner.STATUS_WARNING:statusSpan.style.background="#cb243124";statusSpan.style.color="#cb2431";break;case Html5QrcodeScanner.STATUS_DEFAULT:statusSpan.style.background="#eef";statusSpan.style.color="rgb(17, 17, 17)";break;default:throw"Status class not defined"}}__resetHeaderMessage(){const messageDiv=document.getElementById(this.__getHeaderMessageContainerId());messageDiv.style.display="none"}__setHeaderMessage(messageText,statusClass){if(!statusClass){statusClass=Html5QrcodeScanner.STATUS_DEFAULT}const messageDiv=document.getElementById(this.__getHeaderMessageContainerId());messageDiv.innerHTML=messageText;messageDiv.style.display="block";switch(statusClass){case Html5QrcodeScanner.STATUS_SUCCESS:messageDiv.style.background="#6aaf5042";messageDiv.style.color="#477735";break;case Html5QrcodeScanner.STATUS_WARNING:messageDiv.style.background="#cb243124";messageDiv.style.color="#cb2431";break;case Html5QrcodeScanner.STATUS_DEFAULT:messageDiv.style.background="#00000000";messageDiv.style.color="rgb(17, 17, 17)";break;default:throw"Status class not defined"}}__getScanRegionId(){return`${this.elementId}__scan_region`}__getDashboardId(){return`${this.elementId}__dashboard`}__getDashboardSectionId(){return`${this.elementId}__dashboard_section`}__getDashboardSectionCameraScanRegionId(){return`${this.elementId}__dashboard_section_csr`}__getDashboardSectionSwapLinkId(){return`${this.elementId}__dashboard_section_swaplink`}__getScanRegionCameraContainerId(){return`${this.elementId}__scan_region_camera_container`}__getFileScanInputId(){return`${this.elementId}__filescan_input`}__getStatusSpanId(){return`${this.elementId}__status_span`}__getHeaderMessageContainerId(){return`${this.elementId}__header_message`}__getCameraSelectionId(){return`${this.elementId}__camera_selection`}__getCameraScanRegion(){return document.getElementById(this.__getDashboardSectionCameraScanRegionId())}__getFileScanInput(){return document.getElementById(this.__getFileScanInputId())}__getFileScanRegion(){return document.getElementById(this.__getDashboardSectionFileScanRegionId())}__getCameraSelection(){return document.getElementById(this.__getCameraSelectionId())}__insertCameraScanImageToScanRegion(){const $this=this;const qrCodeScanRegion=document.getElementById(this.__getScanRegionId());if(this.cameraScanImage){qrCodeScanRegion.innerHTML="<br>";qrCodeScanRegion.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image;this.cameraScanImage.onload=_=>{qrCodeScanRegion.innerHTML="<br>";qrCodeScanRegion.appendChild($this.cameraScanImage)};this.cameraScanImage.width=64;this.cameraScanImage.style.opacity="0.8";this.cameraScanImage.src=Html5QrcodeScanner.ASSET_CAMERA_SCAN}__insertFileScanImageToScanRegion(){const $this=this;const qrCodeScanRegion=document.getElementById(this.__getScanRegionId());if(this.fileScanImage){qrCodeScanRegion.innerHTML="<br>";qrCodeScanRegion.appendChild(this.fileScanImage);return}this.fileScanImage=new Image;this.fileScanImage.onload=_=>{qrCodeScanRegion.innerHTML="<br>";qrCodeScanRegion.appendChild($this.fileScanImage)};this.fileScanImage.width=64;this.fileScanImage.style.opacity="0.8";this.fileScanImage.src=Html5QrcodeScanner.ASSET_FILE_SCAN}__clearScanRegion(){const qrCodeScanRegion=document.getElementById(this.__getScanRegionId());qrCodeScanRegion.innerHTML=""}__setStatus(statusText,statusClass){if(!statusClass){statusClass=Html5QrcodeScanner.STATUS_DEFAULT}const statusSpan=document.getElementById(this.__getStatusSpanId());if(statusSpan){statusSpan.innerHTML=statusText}switch(statusClass){case Html5QrcodeScanner.STATUS_SUCCESS:break;case Html5QrcodeScanner.STATUS_WARNING:break;case Html5QrcodeScanner.STATUS_DEFAULT:break;default:throw"Status class not defined"}}__resetHeaderMessage(){const messageDiv=document.getElementById(this.__getHeaderMessageContainerId());if(messageDiv){messageDiv.style.display="none"}}__log(message,...args){if(this.verbose){console.log(message,...args)}}__lastMatchFound(qrCodeMessage,result){this.lastMatchFound=result;this.qrCodeSuccessCallback(qrCodeMessage,result)}} 